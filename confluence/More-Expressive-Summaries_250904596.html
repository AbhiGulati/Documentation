<!DOCTYPE html>
<html>
    <head>
        <title>Certora Prover Documentation : More Expressive Summaries</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Certora Prover Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="Certora-Prover-Documentation_2916669.html">Certora Prover Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="Advanced-Subjects_3080193.html">Advanced Subjects</a></span>
                            </li>
                                                    <li>
                                <span><a href="Method-Declarations_181960777.html">Method Declarations</a></span>
                            </li>
                                                    <li>
                                <span><a href="Function-Summarization_41058462.html">Function Summarization</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Certora Prover Documentation : More Expressive Summaries
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> thomas</span>, last modified by <span class='editor'> Eyal Hochstadt</span> on Jan 17, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="MoreExpressiveSummaries-GhostSummaries">Ghost Summaries</h1><p>What we refer to as <a href="Ghost-Functions_3014665.html" data-linked-resource-id="3014665" data-linked-resource-version="5" data-linked-resource-type="page">ghost functions</a> are simply <a href="https://certora.atlassian.net/wiki/spaces/CPD/pages/3014665/Ghost+Functions#Uninterpreted-Functions" rel="nofollow">uninterpreted functions</a> <span class="inline-comment-marker" data-ref="2f71d04b-1d8a-4b21-bc76-738a2ba587e2">uninterpreted functions</span>. Because these can be axiomatized, they can be used to express any number of <a href="Approximation_41255047.html" data-linked-resource-id="41255047" data-linked-resource-version="2" data-linked-resource-type="page">approximating</a> semantics (rather than summarizing a function as simply a constant). For example, say we wanted to give some approximation for a multiplication function--this is an example of an operation that is very difficult for an SMT solver. Perhaps we only care about the monotonicity of this multiplication function. We may do something like the following:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">ghost ghost_multiplication(uint256,uint256) returns uint256 {
  axiom forall uint256 x1. forall uint256 x2. forall uint256 y. 
      x1 &gt; x2 =&gt; ghost_multiplication(x1, y) &gt; ghost_multiplication(x2, y);
  axiom forall uint256 x. forall uint256 y1. forall uint256 y2.
      y1 &gt; y2 =&gt; ghost_multiplication(x, y1) &gt; ghost_multiplication(x, y2);
}</pre>
</div></div><p>Then we can summarize our multiplication function:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">methods {
  mul(uint256 x, uint256 y) =&gt; ghost_multiplication(x, y);
}</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>You may pass whichever parameters from the summarized function as arguments to the summary in whichever order you want. However you may not put an expression as an argument to the summary.</p></div></div><h1 id="MoreExpressiveSummaries-CVLFunctionSummaries">CVL Function Summaries</h1><p><a href="CVL-Functions_238846033.html" data-linked-resource-id="238846033" data-linked-resource-version="1" data-linked-resource-type="page">CVL Functions</a> provide standard encapsulation of code within a spec file and allow for control flow, local variables etc. (but not loops). A subset of these are allowed as summaries, namely:</p><ol><li><p>They do not contain methods as parameters</p></li><li><p><span class="inline-comment-marker" data-ref="f82d5502-7051-4638-a7ce-50fcc217a985">They do not contain calls to contract functions</span></p></li></ol><p>For example, say we want to summarize a multiplication function again, but this time we want to cut down the search space for the solver a bit. We might try something like the following:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function easier_multiplication(uint256 x, uint256 y) returns uint256 {
  require(x &lt; 1000 || y &lt; 1000);
  return to_uint256(x * y);
}</pre>
</div></div><p>and just as above we summarize the multiplication function in the methods block:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">methods {
  mul(uint256 x, uint256 y) =&gt; easier_multiplication(x, y);
}</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Note <span class="inline-comment-marker" data-ref="ce6270ca-122b-45b3-a6f6-f1adb5b3817a">this specific summarization</span> is very dangerous and may cause <span class="inline-comment-marker" data-ref="d3e88daf-d42e-41a5-b9e0-801c5c6e06fb">vacuity bugs</span>.</p></div></div><p>In simple cases, these summaries may be used to replace harnesses, though the fact that they cannot call contract functions limits the types of <span class="inline-comment-marker" data-ref="3d104699-9d6d-4a1e-a4b3-db7fccd54968">harnesses</span> that may be written.</p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jan 21, 2022 10:00</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
